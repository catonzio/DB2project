<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" media="all"
              href="../css/admin_home.css" th:href="@{/css/admin_home.css}">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
        <title>Admin home</title>
    </head>

    <div class="sidenav">
        <a href="Logout" class="btn logout">Logout</a>
        <div class="login-main-text">
            <h2 th:text="${'Welcome back, ' + admin.username}"><br>home page</h2>
            <p>This is your home page. From here you can insert and inspect products and questionnaires.</p>
            <button class="btn btn-primary" onclick="upload_product()" id="product_upload-btn">Upload product</button><br>
            <form method="get" action="GetAllProducts">
                <button class="btn btn-primary" onclick="show_all_products()" id="products_list-btn">Show all products</button><br>
            </form>
            <button class="btn btn-primary" onclick="show_all_questionnaires()" id="questions_list-btn">Show all questionnaires</button><br>
            <button class="btn btn-primary" onclick="show_all_users()" id="users_list-btn">Show all users</button><br>
        </div>
    </div>

    <div class="main">
        <div class="col-md-6 col-sm-12">
            <div class="right upload-product_form" id="product_upload">
                <form action="InsertProduct" method="post" enctype="multipart/form-data">
                    <div class="form-group">
                        <label>Product name</label>
                        <input type="text" class="form-control" placeholder="Product name" name="name">
                    </div>
                    <div class="form-group">
                        <label>Day for the product</label>
                        <input type="date" class="form-control" name="date">
                    </div>
                    <div class="form-group">
                        <label>Select an image for the product</label>
                        <input type="file" class="form-control" name="image">
                    </div>
                    <p th:text="${message}"></p>
                    <input type="submit" class="btn btn-primary">
                </form>
            </div>

            <div class="right products_list" id="products_list" th:if="${products != null}">
                <p th:if="${#lists.isEmpty(products)}">No product available</p>
                <table th:unless="${#lists.isEmpty(products)}" class="table table-borderless">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Product name</th>
                        <th scope="col">Product of the day</th>
                        <th scope="col">Image</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="product : ${products}">
                        <th scope="row" th:text="${product.id}"></th>
                        <td th:text="${product.name}"></td>
                        <td th:text="${product.productOfTheDay}"></td>
                        <td><img th:src="@{'data:image/png;base64,' + ${product.getBase64Img()}}" width="80" height="100"> </img> </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="right questions_list" id="questions_list">
                <h1>Questionnaires list</h1>
            </div>

            <div class="right users_list" id="users_list">
                <h1>Users list</h1>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script type="text/javascript">
        function show_all_products() {
            $('#products_list-btn').animate({
                opacity: 1.0,
            }, 300);
            $('#products_list').css({
                display: "block"
            });
            $('#product_upload').css({
                display: "none"
            });
            $('#questions_list').css({
                display: "none"
            });
            $('#users_list').css({
                display: "none"
            });
            $('#product_upload-btn').animate({
                opacity: 0.5
            }, 300);
            $('#questions_list-btn').animate({
                opacity: 0.5
            }, 300);
            $('#users_list-btn').animate({
                opacity: 0.5
            }, 300);
        }

        function show_all_questionnaires() {
            $('#questions_list-btn').animate({
                opacity: 1.0,
            }, 300);
            $('#questions_list').css({
                display: "block"
            });
            $('#product_upload').css({
                display: "none"
            });
            $('#products_list').css({
                display: "none"
            });
            $('#users_list').css({
                display: "none"
            });
            $('#product_upload-btn').animate({
                opacity: 0.5
            }, 300);
            $('#products_list-btn').animate({
                opacity: 0.5
            }, 300);
            $('#users_list-btn').animate({
                opacity: 0.5
            }, 300);
        }
        function show_all_users() {
            $('#users_list-btn').animate({
                opacity: 1.0,
            }, 300);
            $('#users_list').css({
                display: "block"
            });
            $('#product_upload').css({
                display: "none"
            });
            $('#products_list').css({
                display: "none"
            });
            $('#questions_list').css({
                display: "none"
            });
            $('#product_upload-btn').animate({
                opacity: 0.5
            }, 300);
            $('#products_list-btn').animate({
                opacity: 0.5
            }, 300);
            $('#questions_list-btn').animate({
                opacity: 0.5
            }, 300);
        }
        function upload_product() {
            $('#product_upload-btn').animate({
                opacity: 1.0,
            }, 300);
            $('#product_upload').css({
                display: "block"
            });
            $('#questions_list').css({
                display: "none"
            });
            $('#products_list').css({
                display: "none"
            });
            $('#users_list').css({
                display: "none"
            });
            $('#questions_list-btn-btn').animate({
                opacity: 0.5
            }, 300);
            $('#products_list-btn').animate({
                opacity: 0.5
            }, 300);
            $('#users_list-btn').animate({
                opacity: 0.5
            }, 300);
        }
    </script>
</html>